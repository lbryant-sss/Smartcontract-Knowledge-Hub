"use strict";(self.webpackChunkmungai=self.webpackChunkmungai||[]).push([[4104],{1420:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"smartcontract-hardhat-local-setup","title":"smartcontract-hardhat-local-setup","description":"Smart Contract Hacking","source":"@site/docs/smartcontract-hardhat-local-setup.md","sourceDirName":".","slug":"/smartcontract-hardhat-local-setup","permalink":"/Smartcontract-Knowledge-Hub/docs/smartcontract-hardhat-local-setup","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Translate your site","permalink":"/Smartcontract-Knowledge-Hub/docs/tutorial-extras/translate-your-site"}}');var a=n(4848),s=n(8453);const r={},i=void 0,c={},l=[{value:"Smart Contract Hacking",id:"smart-contract-hacking",level:2},{value:"Setting up a local environment for testing",id:"setting-up-a-local-environment-for-testing",level:3},{value:"Run the following commands on vscode terminal",id:"run-the-following-commands-on-vscode-terminal",level:4},{value:"Assumes you have node/ npx installed",id:"assumes-you-have-node-npx-installed",level:5},{value:"At the time of writing I have 2 days experience, these are notes for my reference.",id:"at-the-time-of-writing-i-have-2-days-experience-these-are-notes-for-my-reference",level:6},{value:"You don&#39;t have to do this if you are testing a live contract. Just get its address on etherscan or somewhere.",id:"you-dont-have-to-do-this-if-you-are-testing-a-live-contract-just-get-its-address-on-etherscan-or-somewhere",level:6},{value:"Make a folder, anywhere, scripts/.",id:"make-a-folder-anywhere-scripts",level:4}];function d(e){const t={code:"code",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.h2,{id:"smart-contract-hacking",children:"Smart Contract Hacking"}),"\n",(0,a.jsx)(t.h3,{id:"setting-up-a-local-environment-for-testing",children:"Setting up a local environment for testing"}),"\n",(0,a.jsx)(t.h4,{id:"run-the-following-commands-on-vscode-terminal",children:"Run the following commands on vscode terminal"}),"\n",(0,a.jsx)(t.h5,{id:"assumes-you-have-node-npx-installed",children:"Assumes you have node/ npx installed"}),"\n",(0,a.jsx)(t.h6,{id:"at-the-time-of-writing-i-have-2-days-experience-these-are-notes-for-my-reference",children:"At the time of writing I have 2 days experience, these are notes for my reference."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"npx hardhat\n// This downloads hardhat\n//Choose typescript, select yes for all the other optionsbecause you prefer it this way\n"})}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"In the contracts folder copy all the .sol files you need."}),"\n",(0,a.jsx)(t.li,{children:"Go to ignition/modules, create or reuse the Lock.ts file with the following content."}),"\n"]}),"\n",(0,a.jsx)(t.h6,{id:"you-dont-have-to-do-this-if-you-are-testing-a-live-contract-just-get-its-address-on-etherscan-or-somewhere",children:"You don't have to do this if you are testing a live contract. Just get its address on etherscan or somewhere."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'// This is the script that deploys you contract files.\nimport { buildModule } from "@nomicfoundation/hardhat-ignition/modules";\n\nconst LockModule = buildModule("LockModule", (m) => {\n  // Use the existing ERC20 token address\n  //Or any other\n  const existingToken = "0x26D5Bd2dfEDa983ECD6c39899e69DAE6431Dffbb";\n    //Set the owner address, required below\n  const owner = m.getAccount(0);\n  // Use deployer for both owner and fee recipient (customize as needed)\n  const unstoppableVault = m.contract("UnstoppableVault", [\n    existingToken,\n    owner,\n    owner,\n  ]);\n  console.log("UnstoppableVault deployed at:", unstoppableVault);\n  return { unstoppableVault };\n});\n\nexport default LockModule;\n\n'})}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"//Run the command on a seperate terminal\nnpx hardhat node\n// This sets up a local network for testing.\n"})}),"\n",(0,a.jsx)(t.p,{children:"Setting up a local netwok made it a ton easier to test because it is persistent. The node is available until you exit. Much better than networks in hardhat.config.ts"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"npx hardhat ignition deploy ./ignition/modules/Lock.ts --network localhost\n// This deploys the contract, shoud now be ready to interract with.\n"})}),"\n",(0,a.jsx)(t.h4,{id:"make-a-folder-anywhere-scripts",children:"Make a folder, anywhere, scripts/."}),"\n",(0,a.jsx)(t.p,{children:"Inside the folder will be the scripts that you are going to interract with the contract.\nHere is an example:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-ts",children:'import { ethers, ignition } from "hardhat";\n// The import below is where the deploy file mentioned above Lock.ts is located.\nimport LockModule from "../Lock";\nasync function main() {\n    // The contract address, you can find it in the terminal that is running node. Paste it here.\n    const contractAddress = "0xf8b1d4d0a2dd9dd53200a4c6783a69c15e3a25f4";\n    // This gets the actual contract.\n    const vaultFactory = await ethers.getContractFactory("UnstoppableVault");\n    // Will find out soon what this does..I think sets up msg.sender\n    const vault = new ethers.Contract(contractAddress, vaultFactory.interface, signer);\n\n    // Example function call:\n    const tokenAddress = "0x26D5Bd2dfEDa983ECD6c39899e69DAE6431Dffbb";\n    //calling a function maxFlashLoan() below\n    const maxLoan = await vault.maxFlashLoan(tokenAddress);\n    console.log("Max Flash Loan:", maxLoan.toString());\n}\n\nmain().catch(console.error);\n\n'})}),"\n",(0,a.jsx)(t.p,{children:"Will add more info as time goes by.\nMade with love by Brian Mungai."})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>i});var o=n(6540);const a={},s=o.createContext(a);function r(e){const t=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),o.createElement(s.Provider,{value:t},e.children)}}}]);